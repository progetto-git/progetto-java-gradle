/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.2.2/userguide/tutorial_java_projects.html
 */

plugins {
    // Apply the application plugin to add support for building a CLI application.
    id 'application'

    // add support for generating project's reports.
    id 'project-report'

    // add support for spotbugs
    id "com.github.spotbugs" version "4.7.0"
}

// all the tasks to execute by default. Try ./gradle run --dry-run
defaultTasks 'clean', 'compileJava', 'jar', 'assemble', 'compileTestJava', 'test', 'build', 'check', 'javadoc', 'projectReport', 'run'

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

group = 'j2se'
version = '0.1.0'
description = "Primo progetto java basato su gradle"

dependencies {
    // This dependency is used by the application.
    implementation 'com.google.guava:guava:28.1-jre'

    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'
}

jar {
    manifest {
        attributes('Implementation-Title': project.name,
                   'Implementation-Version': project.version)
    }
}

javadoc {
    failOnError = true // doesn't work ?? use Xerror flag instead
    title = "Javadoc Primo progetto"
    options.encoding 'UTF-8'
    options.memberLevel = JavadocMemberLevel.PRIVATE
    options.locale 'it_IT'

    // fails when javadoc is wrong
    options.addStringOption('Xwerror', '-quiet')

    // set this links, if you want to see the API online
    options.setLinks(["https://docs.oracle.com/en/java/javase/11/docs/api/"])

    // set this offline link, if you want to see the API offline by a local directory
    options.linksOffline("file:///usr/share/doc/openjdk-11-doc/api/", "/usr/share/doc/openjdk-11-doc/api/")
}

spotbugs {
    effort = 'max' // min (low-precision), less, more (default), max
    reportLevel = 'low' // low (all), medium (default), high
    jvmArgs = [ '-Xms512m' ]
    maxHeapSize = '768m'
}

// To configure Spotbugs HTML report
spotbugsMain {
    reports {
        html {
            enabled = true
            destination = file("$buildDir/reports/spotbugs/main/spotbugs.html")
        }
    }
}

application {
    // Define the main class for the application.
    mainClass = 'progetto.primo.App'
}
